void it_init() {
    SYSCFG_EXTILineConfig(EXTI_PortSourceGPIOA,EXTI_PinSource0);
    EXTI_InitTypeDef exti;  // ????????? ??? ????????
    exti.EXTI_Line = EXTI_Line0;    /// ?????? ?? ????? 0
    exti.EXTI_Mode = EXTI_Mode_Interrupt;    // ?????????? (? ?? ???????)
    exti.EXTI_Trigger = EXTI_Trigger_Rising;  // ??????????? ?? ????????? ?????? ????????
    exti.EXTI_LineCmd = ENABLE;    /// ???
 
    EXTI_Init(&exti);
 
    NVIC_InitTypeDef nvic;
    nvic.NVIC_IRQChannel = EXTI0_IRQn;  // ????????? ????? IRQ
    nvic.NVIC_IRQChannelPreemptionPriority = 2;  // ????????? ?????? ( 0 (????? ????????????) - 15)
    nvic.NVIC_IRQChannelSubPriority = 2;  // ????????? ?????????
    nvic.NVIC_IRQChannelCmd = ENABLE;
 
    NVIC_Init(&nvic);
}
??????.
??????? ?? ???????? A ???? ??? ????? ?????????? EXTI. ????? ??? ?????? ????????? ????????? ??????????? ???. ????? ???? ????????? ? ????????? NVIC.

?????????? ?????????? - ???? ???????? ?????:

?
1
u16 flag = 0;
?????????? ??????????:

?
1
2
3
4
5
6
7
8
void EXTI0_IRQHandler(void){
     /* ????? ????????? ????????? ????? ??????????  */
    if (EXTI_GetITStatus(EXTI_Line0) != RESET){
        flag += 1;  // ??????????? ???? - ????????? ????
        if (flag >= 4) flag = 0;  // ? ??? 4 ?????. ????????
        EXTI_ClearITPendingBit(EXTI_Line0);  // ?????????? ???? ??????????
    }
}
!!! ???????? ???????? ?? ?????????? ?????? ??????? ????.

??????? main:

?
1
2
3
4
5
6
7
8
int main(){
    ButtonInit();
    it_init();
    leds_init();
  do {
      GPIO_Write(GPIOD, LED[flag]);  // ???????? ???? ?? ?????. ?? ???? ???? - ????? ????? (?? 0 ?? 3)
  } while(1);
}
